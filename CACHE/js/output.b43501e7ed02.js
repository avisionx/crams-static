$(".sideTab").on('click',(e)=>{$(e.target).children().click();});$(".content").on('click',()=>{$(".content").removeClass("show");$("#sidebar").removeClass("show");$(".hamburger").removeClass("is-active");});function toggleSidenav(){$(".hamburger").toggleClass("is-active");$(".content").toggleClass("show");$("#sidebar").toggleClass("show");}
fetchData("/api/notifs/",populateNotification);function populateNotification(notifs){if(notifs.data.length!=0){$("#notifDot").removeClass('d-none');for(var i=0;i<notifs.data.length;i++){var notifMsg=notifs.data[i].msg;var notifDate=notifs.data[i].created_at;var ele='<div class="dropdown-item notifDropDown-item small px-3"><p class="mb-1 text-wrap">'+
notifMsg+'</p><p class="mb-1 text-secondary small text-right">'+notifDate+'</p></div>';if(i==0){$("#notificationBox").html(ele);}else{$("#notificationBox").append(ele);}}}};var ctx=document.getElementById('gradesChart').getContext('2d');var gradientBottom=275;var gradientFill=ctx.createLinearGradient(0,gradientBottom,0,0);gradientFill.addColorStop(0,"rgba(255, 255, 255, 0.5)");gradientFill.addColorStop(1,"rgba(244, 144, 128, 0.3)");var gradeOptions={legend:{display:false,},scales:{yAxes:[{ticks:{max:10,min:0,},gridLines:{borderDash:[1,4],}}],xAxes:[{gridLines:{display:false}}]},tooltips:{enabled:true,mode:'index',intersect:false,backgroundColor:"white",bodyFontColor:"#999999",displayColors:false,shadowOffsetX:3,shadowOffsetY:3,shadowBlur:15,shadowColor:"rgba(0, 0, 0, 0.3)",callbacks:{title:()=>{},label:function(tooltipItem,data){return"SGPA: "+tooltipItem.yLabel;},},xPadding:15,yPadding:10,caretSize:0,yAlign:'top',xAlign:'center',caretPadding:10},layout:{padding:{left:10,right:10,top:10,bottom:10}},responsive:true,}
var gradeData={labels:['Sem 1','Sem 2','Sem 3','Sem 4','Sem 5','Sem 6','Sem 7','Sem 8'],datasets:[{label:'CGPA',data:[0,0,0,0,0,0,0,0],backgroundColor:gradientFill,borderColor:['rgba(255, 99, 132, 1)','rgba(54, 162, 235, 1)','rgba(255, 206, 86, 1)','rgba(75, 192, 192, 1)','rgba(153, 102, 255, 1)','rgba(255, 159, 64, 1)','rgba(255, 99, 132, 1)','rgba(75, 192, 192, 1)',],borderWidth:2}]}
var gradesChart=new Chart(ctx,{type:'line',data:gradeData,options:gradeOptions});function changeStreamStatTab(e,tab){e.preventDefault();var textToSet=$(e.target).html();$("#streamCompDropBtn").html(textToSet);$(".hideStat").removeClass("hideStat");$("#"+tab).addClass("hideStat");};$(document).ready(()=>{fetchData("/api/data/",populate);});function populate(data){var stuData=data.student;var streamData=data.stream;var coreData=data.coreData;$("#credComp").text(stuData.credits_completed)
$("#credReq").text(streamData.total_credits)
var credPerc=Math.round(stuData.credits_completed/streamData.total_credits*100);credPerc=credPerc>100?100:credPerc;$(".statCircle").css("stroke-dasharray",credPerc+", 100");$(".statPercentage").text(credPerc);var stuHistory=stuData.history;var lastSem=stuHistory[stuHistory.length-1];if(lastSem.sgpa<0){lastSem.courseReg.forEach(course=>{var ele='<div class="card shadow border-0 flex-grow-1 mt-3" style="max-height: 70px;"><div class="row h-100 px-2 py-3">';ele+='<div class="col-4 small v-center pl-4"><p class="mb-0 text-uppercase">'+course.id+'</p></div>';ele+='<div class="col-8 small v-center"><p class="mb-0">'+course.name+'</p></div></div></div>';$("#courseRegList").append(ele);});}else{var ele='<div class="h-100 v-center h-center card shadow border-0 mt-3">No Courses Registered Yet.</div>'
$("#courseRegList").append(ele);}
var i=0;var sgpaArr=[0,0,0,0,0,0,0,0];stuHistory.forEach(semester=>{if(semester.sgpa!=-1){sgpaArr[i]=semester.sgpa;}
i+=1;});gradesChart.data.datasets[0].data=sgpaArr;gradesChart.update();var courseIco={'completed':"-check",'ongoing':"-dot",'pending':"",}
for(const key in coreData){coreData[key].forEach(course=>{var ele='<div class="col-auto mt-1 mr-3"><i class="far fa'+courseIco[key]+'-circle"></i> <a href="/courses/#'+slugify(course)+'" class="text-info">'+course+'</a></div>';$("#core-"+key).append(ele);});}};